version: '3'
server:
  image: nginx
  restart: always
  volumes:
    - ./server/conf.d:/etc/nginx/conf.d
    - ./app/static:/app/static
    - /root/ssl/official/gveyes_net.crt:/root/ssl/official/gveyes_net.crt
    - /root/ssl/official/gveyes.net.private_key:/root/ssl/official/gveyes.net.private_key
  links:
    - web:web
  ports:
    - "433:433"

web:
  extends:
    file: docker-compose.base.yml
    service: web
  expose:
    - "5000"
  command: gunicorn app:app -b :5000 --name app --log-level=debug --log-file=-
